<html>
  <script type="module">
    import init, { eval_program } from './pkg/monkey.js'
    document.addEventListener('DOMContentLoaded', async () => {
      await init()
      const program = document.getElementById('program')
      const result = document.getElementById('result')
      const engine = document.getElementById('engine')
      document.getElementById('submit').addEventListener('click', () => {
        result.innerHTML =  eval_program(program.value, engine.value)
      })
    })
  </script>
  <body>
    <div>
      <label for="engine">Select Engine:</label>
      <select id="engine">
        <option value="vm">VM</option>
        <option value="eval">eval</option>
      </select>
    </div>
    <div>
      <label for="program">Write some code:<br></label>
      <textarea id="program" rows="40" cols="100"></textarea>
    </div>
    <br>
    <button id="submit">
      Submit
    </button>
    <br>
    <br>
    <div>
      Result:
    </div>
    <div id="result"></div>
  </body>
</html>